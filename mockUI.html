<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<title>Page Title</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
</style>

<body>

    <div id="fakeClient" style="height: 500px; width: 500px; border-color: black; border: 2px; border-style: solid">
        <div id="flexBox" style="height: 500px; width: 500px; display:flex;">
            <div id="setOne" style="height: 300px; width: 300px;">    
            <div id="textDisplay" style="height: 300px; width: 300px; border-color: black; border: 2px; border-style: solid; scroll-behavior: auto;"></div>
            <div style="width: 500px; display:flex;">
            <input id="textInput" style="height: 30px; width: 300px; border-color: black; border: 2px; border-style: solid">
            <button id="inputTrigger" style="float:right;" onclick="sendMessage()">SEND</button>
            </div>
            </div>
        <div id="friendsList" style="height: 300px; width: 100px; border-color: black; border: 2px; border-style: solid; float:right; display: flex; margin-left: auto;">
        </div>
        </div> 
        
    </div>
    
    </div>
    <button onclick="registerUser()">register user</button>
    <button onclick="disconnect()">disconnect</button>
    <button onclick="personalMessage()">personal message</button>
    <button onclick="joinRoom()">join room</button>
    <button onclick="roomMessage()"> message room</button>
    <button onclick="registerLarcera()">Register Larcera</button>
    <button onclick="createRoom()">create new room/channel</button>
    <button onclick="deleteRoom()">delete room/channel</button>
    <button onclick="removeUserFromRoom()">remove a specified user from room</button>

    <script src="https://cdn.socket.io/4.6.0/socket.io.min.js" integrity="sha384-c79GN5VsunZvi+Q/WObgk2in0CbZsHnjEqvFxC5DxHn9lTfNce2WW6h2pH6u/kF+" crossorigin="anonymous"></script>
<script type="module">
    import { io } from "https://cdn.socket.io/4.6.0/socket.io.esm.min.js";
</script>

<script>

    const textDisplay = document.getElementById("textDisplay");

    const socket = io("http://localhost:3000");


    socket.on("connect", () => {
  console.log(socket.id); // x8WIv7-mJelg7on_ALbx

});

socket.on("message", (arg) => {
  console.log(arg);
  const newParagraph = document.createElement("paragraph");
  newParagraph.innerHTML = arg;
  textDisplay.insertBefore(newParagraph, null);
});


socket.on("disconnect", (reason) => {
  console.log(`${socket.id} and reason: ${reason}`); // undefined
});
// function to send a new message

function sendMessage() 
    {
        console.log("message was sent");
      // get input element where the message is typed
      const textInput = document.getElementById('textInput');

      // get the message itself
      const message = textInput.value;

      // clear input field after getting the message
      textInput.value = '';

      // emit the 'message' event to the server with username and the message as the data
      socket.emit('message', { username: 'username', message: message });
    }

    function registerUser() 
    {
      socket.emit('registerUser', "2007boy9");
    }

    function registerLarcera() 
    {
      socket.emit('registerUser', "Larcera"); 
    }

    function disconnect() 
    {
        
      console.log("we don't actually want to do anything here, disconnect happens automatically when a client loses connection to socket");
    }

    function personalMessage() 
    {
      socket.emit('personalMessage', { "toUserId": "Larcera", "message": "Yo this is my DM to u" });
    }

    function joinRoom() 
    {
        
      socket.emit('joinRoom', "partyChat123");
    }

    function roomMessage() 
    {
        
      socket.emit('roomMessage', { "roomName": "Global", "message": "Bandos 2+ min lvl 115, bgs" });
    }
    function createRoom() 
    {
        
      socket.emit('createRoom',"partyChat123");
    }
    function deleteRoom() 
    {
        
      socket.emit('deleteRoom',"partyChat123");
    }
    function removeUserFromRoom()
    {
      socket.emit('removeUserFromRoom', { "userIdToBeRemovedFromRoom": "Larcera", "roomName": "partyChat123" });
    }

</script>

</body>
</html>



